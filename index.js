import{S as w,i}from"./assets/vendor-BrddEoy-.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const m of n.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&s(m)}).observe(document,{childList:!0,subtree:!0});function t(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(e){if(e.ep)return;e.ep=!0;const n=t(e);fetch(e.href,n)}})();const E="52395439-1c1f05bbfb1dbdeee6be85271",_="https://pixabay.com/api/",$=15;async function y(r,o=1){if(!r||typeof r!="string")throw new Error("Query must be a non-empty string");const t=`${_}?key=${E}&q=${encodeURIComponent(r)}&image_type=photo&orientation=horizontal&safesearch=true&page=${o}&per_page=${$}`,s=await fetch(t);if(!s.ok)throw new Error(`Pixabay API error: ${s.status}`);return await s.json()}const l=document.querySelector(".gallery"),a=document.querySelector(".load-more"),f=document.querySelector(".loader"),h=new w(".gallery a",{captionsData:"alt",captionDelay:250});function g(r=[]){if(!l)return;const o=r.map(t=>`
<li class="gallery__item">
  <a class="gallery__link" href="${t.largeImageURL}">
    <img class="gallery__image" src="${t.webformatURL}" alt="${t.tags}" loading="lazy" />
  </a>
</li>`).join("");l.insertAdjacentHTML("beforeend",o),h.refresh()}function P(){l&&(l.innerHTML="",h.refresh())}function p(){f&&f.classList.add("is-visible")}function b(){f&&f.classList.remove("is-visible")}function L(){a&&a.classList.add("is-visible")}function d(){a&&a.classList.remove("is-visible")}const S=document.querySelector(".search-form"),A=document.querySelector(".search-input");let u="",c=1;const v=15;S.addEventListener("submit",B);a&&a.addEventListener("click",M);async function B(r){r.preventDefault();const o=A.value.trim();if(!o){i.warning({title:"Увага",message:"Введіть пошуковий запит"});return}u=o,c=1,P(),d();try{p();const t=await y(u,c),{hits:s=[],totalHits:e=0}=t;if(!s.length){i.error({title:"Нічого не знайдено",message:`За запитом "${u}" результатів немає`});return}g(s),i.success({title:"Знайдено",message:`Знайдено ${e} зображень`}),e>c*v?L():(d(),i.info({title:"Кінець колекції",message:"We're sorry, but you've reached the end of search results."}))}catch(t){console.error(t),i.error({title:"Помилка",message:t.message||"Щось пішло не так"})}finally{b()}}async function M(){a.disabled=!0,c+=1;try{p();const r=await y(u,c),{hits:o=[],totalHits:t=0}=r;if(!o.length){i.info({title:"Кінець колекції",message:"We're sorry, but you've reached the end of search results."}),d();return}const s=l.lastElementChild;if(g(o),s){const{height:e}=s.getBoundingClientRect();window.scrollBy({top:e*2,behavior:"smooth"})}t>c*v?L():(d(),i.info({title:"Кінець колекції",message:"We're sorry, but you've reached the end of search results."}))}catch(r){console.error(r),i.error({title:"Помилка",message:r.message||"Не вдалося завантажити дані"})}finally{b(),a.disabled=!1}}
//# sourceMappingURL=index.js.map
